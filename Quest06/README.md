# Quest 06. 인터넷의 이해

## Introduction
* 이번 퀘스트에서는 인터넷이 어떻게 동작하며, 서버와 클라이언트, 웹 브라우저 등의 역할은 무엇인지 알아보겠습니다.

## Topics
* 서버와 클라이언트, 그리고 웹 브라우저
* 인터넷을 구성하는 여러 가지 프로토콜
  * IP
  * TCP
  * HTTP
* DNS

## Resources
* [OSI 모형](https://ko.wikipedia.org/wiki/OSI_%EB%AA%A8%ED%98%95)
* [IP](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%84%B7_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C)
  * [Online service Traceroute](http://ping.eu/traceroute/)
* [TCP](https://ko.wikipedia.org/wiki/%EC%A0%84%EC%86%A1_%EC%A0%9C%EC%96%B4_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C)
  * [Wireshark](https://www.wireshark.org/download.html)
* [HTTP](https://ko.wikipedia.org/wiki/HTTP)
  * Chrome developer tool, Network tab
* [DNS](https://ko.wikipedia.org/wiki/%EB%8F%84%EB%A9%94%EC%9D%B8_%EB%84%A4%EC%9E%84_%EC%8B%9C%EC%8A%A4%ED%85%9C)
  * [Web-based Dig](http://networking.ringofsaturn.com/Tools/dig.php)

## Checklist
* 인터넷은 어떻게 동작하나요? Internet Protocol Suite의 레이어 모델에 입각하여 설명해 보세요.
- 인터넷은 컴퓨터들이 서로 통신하기 위한 글로벌한 네트워크입니다. 인터넷 프로토콜 스위트(Internet Protocol Suite)는 이러한 인터넷에서 통신을 가능하게 하는 프로토콜의 모음입니다. 인터넷 프로토콜 스위트는 계층적인 레이어 모델로 구성되어 있으며, 각 레이어는 서로 다른 역할을 수행합니다.

  * 근거리에서 서로 떨어진 두 전자기기가 유선/무선으로 서로 통신하는 프로토콜은 어떻게 동작할까요?
  - 유선 프로토콜의 경우, 예를 들어 이더넷(Ethernet)이 대표적입니다. 이더넷은 전송할 데이터를 비트(bit) 단위로 나누어 전송하며, 이를 패킷(packet)이라고 부릅니다. 각 패킷에는 목적지와 출발지의 MAC 주소가 포함되어 있으며, 이를 기반으로 패킷을 수신하는 측에서 해당 패킷을 받아들이게 됩니다.
  무선 프로토콜의 경우, 예를 들어 Wi-Fi가 대표적입니다. Wi-Fi는 무선 신호를 이용하여 데이터를 전송하며, 이 신호는 무선 주파수를 이용해 전파됩니다. 전송할 데이터 역시 비트(bit) 단위로 나누어 전송되며, 이를 프레임(frame)이라고 부릅니다. 각 프레임에는 목적지와 출발지의 MAC 주소와 더불어, 각종 제어 정보 등이 포함되어 있습니다. 

  * 근거리에 있는 여러 대의 전자기기가 서로 통신하는 프로토콜은 어떻게 동작할까요?
  - 근거리에 있는 여러 대의 전자기기가 서로 통신하는 경우, 일반적으로 무선 LAN (Local Area Network)을 사용합니다. 무선 LAN은 일반적으로 Wi-Fi라는 기술을 사용하며, 이를 통해 여러 대의 디바이스가 인터넷이나 다른 네트워크에 연결되어 통신할 수 있습니다. 무선 LAN에서는 전송되는 데이터가 라우터에서 무선 신호로 전파되어 각 디바이스에서 수신됩니다. 이 때, Wi-Fi에서는 주파수 대역을 이용하여 여러 대의 디바이스가 동시에 통신할 수 있도록 합니다. 

  * 아주 멀리 떨어져 있는 두 전자기기가 유선/무선으로 서로 통신하는 프로토콜은 어떻게 동작할까요?
  - 아주 멀리 떨어져 있는 두 전자기기가 서로 통신하려면 인터넷을 통해 데이터를 전송해야 합니다. 이 때는 인터넷 상에서 데이터를 전송하기 위한 프로토콜인 TCP/IP 프로토콜을 사용합니다.
TCP/IP 프로토콜은 데이터를 패킷 단위로 나누어 전송하고, 이를 받은 수신자가 다시 원래 데이터로 조립합니다. 데이터 패킷은 송신자와 수신자 간의 경로에 있는 다양한 라우터들을 거쳐 전송됩니다. 이 때 각 라우터들은 다음에 어디로 보낼지를 결정하기 위해 패킷의 헤더 정보를 참조합니다.
또한, 두 전자기기 간의 통신을 위해 인터넷 상에서는 각 기기에 고유한 IP 주소가 필요합니다. 이 주소를 사용하여 송신자는 수신자를 식별하고, 데이터 패킷이 목적지에 도착할 때까지 다른 라우터를 거쳐 목적지까지 전송됩니다.

  * 두 전자기기가 신뢰성을 가지고 통신할 수 있도록 하기 위한 프로토콜은 어떻게 동작할까요?
  - 두 전자기기가 신뢰성을 가지고 통신하기 위해서는, 에러 검출 및 수정 기능을 가진 프로토콜이 필요합니다. 예를 들어, TCP (Transmission Control Protocol) 프로토콜은 데이터 전송 중 데이터 손실이나 손상이 발생하면 이를 검출하고, 재전송 요청을 통해 데이터를 재전송하므로 신뢰성 있는 통신이 가능합니다. 또한, 데이터를 전송할 때 순서를 보장하여 수신 측에서는 전송된 순서대로 데이터를 복원할 수 있도록 합니다. 이와 같은 기능들은 TCP 프로토콜에서 제공되며, 신뢰성 있는 데이터 통신을 위해 많이 사용됩니다.

  * HTTP는 어떻게 동작할까요?
  - TTP는 클라이언트-서버 모델을 기반으로 동작합니다. 클라이언트는 웹 브라우저를 통해 요청(request)을 보내고, 서버는 요청에 대한 응답(response)을 반환합니다.
HTTP 요청은 여러 부분으로 구성됩니다. 첫 번째 줄은 요청 메서드(GET, POST 등)와 요청 대상 URL로 구성되며, 두 번째 줄부터는 요청 헤더와 요청 바디가 포함됩니다.
서버는 HTTP 요청을 받으면, 요청 메서드에 따라 요청을 처리하고, 응답을 반환합니다. 응답은 상태 코드(200, 404 등)와 응답 헤더, 응답 바디로 구성됩니다.
HTTP는 상태를 유지하지 않는(stateless) 프로토콜입니다. 이는 서버가 클라이언트의 이전 요청에 대한 정보를 저장하지 않는다는 것을 의미합니다. 따라서 클라이언트는 매 요청마다 모든 정보를 다시 보내야 합니다.

* 우리가 브라우저의 주소 창에 www.knowre.com 을 쳤을 때, 어떤 과정을 통해 서버의 IP 주소를 알게 될까요?
- 우리가 브라우저의 주소 창에 www.knowre.com을 입력하면, 먼저 브라우저는 로컬 DNS 캐시에 해당 도메인의 IP 주소가 있는지 확인합니다. 로컬 DNS 캐시에 없으면 브라우저는 운영체제에 등록된 DNS 서버의 IP 주소를 가져와 DNS 서버에 www.knowre.com의 IP 주소를 요청합니다. 이 요청은 일반적으로 UDP 프로토콜을 사용하며, DNS 서버는 해당 도메인의 IP 주소를 응답합니다. 브라우저는 이 응답을 받아 해당 도메인의 IP 주소를 알아내고, 해당 IP 주소로 HTTP 요청을 보내게 됩니다. 이 과정을 통해 브라우저는 서버의 IP 주소를 알게 됩니다.


## Quest
* tracert(Windows가 아닌 경우 traceroute) 명령을 통해 www.google.com 까지 가는 경로를 찾아 보세요.
  * 어떤 IP주소들이 있나요?
  - 119.193.107.126, 112.188.104.5의 아이피들이 있었습니다
  * 그 IP주소들은 어디에 위치해 있나요?
  -  sin01s16-in-f4.1e100.net에 있었습니다
* Wireshark를 통해 www.google.com 으로 요청을 날렸을 떄 어떤 TCP 패킷이 오가는지 확인해 보세요
  - 클라이언트가 서버로 SYN 패킷을 보냅니다. 서버는 클라이언트로부터 받은 SYN패킷에 대해 SYN-ACK패킷을 보냅니다
  또한 서버는 HTTP응답을 포함한 데이터 패킷을 보냅니다.
  * TCP 패킷을 주고받는 과정은 어떻게 되나요?
  - 클라이언트가 서버로 연결 요청을 보내면, 서버는 연결 요청을 받았다는 응답으로 SYN-ACK 패킷을 보내고, 클라이언트는 서버로부터 받은 SYN-ACK 패킷에 대한 응답으로 ACK 패킷을 보내 연결하며 클라이언트와 서버는 데이터를 주고받습니다. 데이터 전송이 끝나면, 클라이언트 또는 서버가 FIN 패킷을 보내서 데이터 전송이 끝났음을 알리고, 상대방이 이에 대한 응답으로 ACK 패킷을 보내고, 이에 대한 확인 패킷(ACK 패킷)을 받은 측도 FIN 패킷을 보내서 연결을 종료합니다.
  * 각각의 패킷에 어떤 정보들이 담겨 있나요?
  - 송신지의 IP주소와 포트, 수신지 IP주소와 포트, ACK번호, 플래그, 데이터 등이 있습니다
* telnet 명령을 통해 http://www.google.com/ URL에 HTTP 요청을 날려 보세요.
  * 어떤 헤더들이 있나요?
  - 응답헤더, 요청헤더, 공통헤더가있습니다
  * 그 헤더들은 어떤 역할을 하나요?
  - 응답헤더: 웹서버 정보를 나타냅니다
요청헤더: 가장 흔하게 보고 사용하는 헤더이다. 
현재 사용자가 어떤 클라이언트(운영체제, 앱, 브라우저 등)를 통해 요청을 보냈는지 알 수 있습니다
공통헤더: 요청과 응답에 모두 사용되는 헤더입니다

## Advanced
* HTTP의 최신 버전인 HTTP/3는 어떤 식으로 구성되어 있을까요?
* TCP/IP 외에 전세계적인 네트워크를 구성하기 위한 다른 방식도 제안된 바 있을까요?
